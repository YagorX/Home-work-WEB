<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Каталог Renault</title>
    <link rel="stylesheet" href="styles/style2.css">
</head>
<body>
    <!-- Контейнер с размытым фоном и кнопкой -->
    <div class="home-button-container">
        <a href="index.html" class="home-button">На главную</a>
    </div>

    <!-- Модальное окно для деталей -->
    <div id="carModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="modal-header">
                <img class="modal-image" id="modalImage" src="" alt="Автомобиль">
                <div class="modal-title">
                    <h2 id="modalCarTitle">Название модели</h2>
                    <div class="modal-price" id="modalPrice">от 0 ₽</div>
                </div>
            </div>
            
            <div class="modal-description" id="modalDescription">
                Описание автомобиля...
            </div>
            
            <div class="modal-specs">
                <div class="spec-group">
                    <h3>Технические характеристики</h3>
                    <ul class="spec-list" id="techSpecs">
                        <!-- Заполняется JavaScript -->
                    </ul>
                </div>
                
                <div class="spec-group">
                    <h3>Комплектация</h3>
                    <ul class="spec-list" id="equipmentSpecs">
                        <!-- Заполняется JavaScript -->
                    </ul>
                </div>
            </div>
            
            <div class="modal-features">
                <h3>Ключевые особенности</h3>
                <div class="features-grid" id="featuresGrid">
                    <!-- Заполняется JavaScript -->
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="test-drive-btn">Записаться на тест-драйв</button>
                <button class="contact-btn">Связаться с менеджером</button>
            </div>
        </div>
    </div>

    <div class="catalog-container">
        <h1 class="catalog-title">Каталог Renault</h1>

        <!-- Раздел 1: Легковые автомобили -->
        <div class="section" id="light-cars">
            <h2 class="section-title">Легковые автомобили</h2>
            <div class="cards-grid">
                
                <div class="card">
                    <img class="card-image" src="images/renault_logan.jpeg" alt="Renault Logan">
                    <div class="card-content">
                        <h3 class="card-title">Renault Logan</h3>
                        <p class="card-description">Надежный седан для города и трассы. Идеальное сочетание цены и качества.</p>
                        <ul class="card-features">
                            <li>Расход: 6.1 л/100км</li>
                            <li>Мощность: 82 л.с.</li>
                            <li>Объем багажника: 510 л</li>
                        </ul>
                        <div class="card-price">от 950 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('logan')">Подробнее</button>
                    </div>
                </div>

                <div class="card">
                    <img class="card-image" src="images/renault_sander.jpg" alt="Renault Sandero">
                    <div class="card-content">
                        <h3 class="card-title">Renault Sandero</h3>
                        <p class="card-description">Компактный хэтчбек с просторным салоном и экономичным двигателем.</p>
                        <ul class="card-features">
                            <li>Расход: 5.8 л/100км</li>
                            <li>Мощность: 75 л.с.</li>
                            <li>5-ступенчатая МКПП</li>
                        </ul>
                        <div class="card-price">от 890 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('sandero')">Подробнее</button>
                    </div>
                </div>

                <div class="card">
                    <img class="card-image" src="images/renault_sander_stepway.jpeg" alt="Renault Sandero Stepway">
                    <div class="card-content">
                        <h3 class="card-title">Renault Sandero Stepway</h3>
                        <p class="card-description">Хэтчбек в кросс-кузове с увеличенным клиренсом и стильным дизайном.</p>
                        <ul class="card-features">
                            <li>Клиренс: 195 мм</li>
                            <li>Мощность: 90 л.с.</li>
                            <li>Защита бампера</li>
                        </ul>
                        <div class="card-price">от 1 100 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('stepway')">Подробнее</button>
                    </div>
                </div>

            </div>
        </div>

        <!-- Раздел 2: Кроссоверы -->
        <div class="section" id="crossovers">
            <h2 class="section-title">Кроссоверы</h2>
            <div class="cards-grid">
                
                <div class="card">
                    <img class="card-image" src="images/duster.jpeg" alt="Renault Duster">
                    <div class="card-content">
                        <h3 class="card-title">Renault Duster</h3>
                        <p class="card-description">Легендарный внедорожник с полным приводом. Покоритель любых дорог.</p>
                        <ul class="card-features">
                            <li>Полный привод 4x4</li>
                            <li>Мощность: 114 л.с.</li>
                            <li>Клиренс: 210 мм</li>
                        </ul>
                        <div class="card-price">от 1 450 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('duster')">Подробнее</button>
                    </div>
                </div>

                <div class="card">
                    <img class="card-image" src="images/kapture.jpeg" alt="Renault Kaptur">
                    <div class="card-content">
                        <h3 class="card-title">Renault Kaptur</h3>
                        <p class="card-description">Стильный компактный кроссовер с передовыми технологиями безопасности.</p>
                        <ul class="card-features">
                            <li>Система ESP</li>
                            <li>Мощность: 113 л.с.</li>
                            <li>Мультимедиа R-Link</li>
                        </ul>
                        <div class="card-price">от 1 350 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('kaptur')">Подробнее</button>
                    </div>
                </div>

                <div class="card">
                    <img class="card-image" src="images/arkana.jpeg" alt="Renault Arkana">
                    <div class="card-content">
                        <h3 class="card-title">Renault Arkana</h3>
                        <p class="card-description">Элегантное кросс-купе с динамичным характером и просторным салоном.</p>
                        <ul class="card-features">
                            <li>Купе-форма</li>
                            <li>Мощность: 150 л.с.</li>
                            <li>Вариатор X-Tronic</li>
                        </ul>
                        <div class="card-price">от 1 650 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('arkana')">Подробнее</button>
                    </div>
                </div>

            </div>
        </div>

        <!-- Раздел 3: Коммерческие автомобили -->
        <div class="section" id="commercial">
            <h2 class="section-title">Коммерческие автомобили</h2>
            <div class="cards-grid">
                
                <div class="card">
                    <img class="card-image" src="images/van.jpeg" alt="Renault Logan Van">
                    <div class="card-content">
                        <h3 class="card-title">Renault Logan Van</h3>
                        <p class="card-description">Коммерческая версия Logan с увеличенным багажным отделением.</p>
                        <ul class="card-features">
                            <li>Объем багажника: 800 л</li>
                            <li>Грузоподъемность: 500 кг</li>
                            <li>Низкий расход топлива</li>
                        </ul>
                        <div class="card-price">от 1 000 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('loganvan')">Подробнее</button>
                    </div>
                </div>

                <div class="card">
                    <img class="card-image" src="images/kangoo.jpeg" alt="Renault Kangoo">
                    <div class="card-content">
                        <h3 class="card-title">Renault Kangoo</h3>
                        <p class="card-description">Компактный коммерческий автомобиль с отличной маневренностью.</p>
                        <ul class="card-features">
                            <li>Объем: 3-4.6 м³</li>
                            <li>Грузоподъемность: 650 кг</li>
                            <li>Сдвижные двери</li>
                        </ul>
                        <div class="card-price">от 1 300 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('kangoo')">Подробнее</button>
                    </div>
                </div>

                <div class="card">
                    <img class="card-image" src="images/trafic.jpg" alt="Renault Trafic">
                    <div class="card-content">
                        <h3 class="card-title">Renault Trafic</h3>
                        <p class="card-description">Универсальный коммерческий автомобиль для перевозки грузов.</p>
                        <ul class="card-features">
                            <li>Объем: 5.2-8.6 м³</li>
                            <li>Грузоподъемность: 1-1.5 т</li>
                            <li>Дизельный двигатель</li>
                        </ul>
                        <div class="card-price">от 1 800 000 ₽</div>
                        <button class="card-button" onclick="showCarDetails('trafic')">Подробнее</button>
                    </div>
                </div>

            </div>
        </div>

        <!-- Раздел 4: Электромобили и гибриды -->
        <div class="section" id="electro">
            <h2 class="section-title">Электромобили и гибриды</h2>
            <div class="cards-grid">
                
                <div class="card ev-card">
                    <img class="card-image" src="images/zoe.jpeg" alt="Renault ZOE">
                    <div class="card-content">
                        <h3 class="card-title">Renault ZOE</h3>
                        <p class="card-description">Компактный электромобиль для города с впечатляющим запасом хода.</p>
                        <ul class="card-features ev-features">
                            <li>Запас хода: 395 км</li>
                            <li>Мощность: 135 л.с.</li>
                            <li>Быстрая зарядка за 30 мин</li>
                        </ul>
                        <div class="card-price ev-price">от 2 200 000 ₽</div>
                        <button class="card-button ev-button" onclick="showCarDetails('zoe')">Подробнее</button>
                    </div>
                </div>

                <div class="card ev-card">
                    <img class="card-image" src="images/megane e.jpg" alt="Renault Megane E-Tech">
                    <div class="card-content">
                        <h3 class="card-title">Renault Megane E-Tech</h3>
                        <p class="card-description">Современный электрокроссовер с технологиями нового поколения.</p>
                        <ul class="card-features ev-features">
                            <li>Запас хода: 470 км</li>
                            <li>Мощность: 220 л.с.</li>
                            <li>Цифровая панель 12,3"</li>
                        </ul>
                        <div class="card-price ev-price">от 3 500 000 ₽</div>
                        <button class="card-button ev-button" onclick="showCarDetails('megane')">Подробнее</button>
                    </div>
                </div>

                <div class="card ev-card">
                    <img class="card-image" src="images/captur e.jpg" alt="Renault Captur E-Tech">
                    <div class="card-content">
                        <h3 class="card-title">Renault Captur E-Tech</h3>
                        <p class="card-description">Гибридный кроссовер с экономичным расходом и отличной динамикой.</p>
                        <ul class="card-features ev-features">
                            <li>Гибридная система</li>
                            <li>Расход: 4.5 л/100км</li>
                            <li>Электро-привод на малых скоростях</li>
                        </ul>
                        <div class="card-price ev-price">от 1 900 000 ₽</div>
                        <button class="card-button ev-button" onclick="showCarDetails('captur')">Подробнее</button>
                    </div>
                </div>

            </div>
        </div>

    </div>
<script>
    const modal = document.getElementById('carModal');
    const closeBtn = document.querySelector('.close');

// Функция показа деталей автомобиля
async function showCarDetails(carId) {
    try {
        console.log(`Запрашиваю данные для автомобиля: ${carId}`);
        
        const response = await fetch(`http://localhost:8080/api/cars/${carId}`);
        console.log('Ответ сервера:', response.status);
        
        if (!response.ok) {
            if (response.status === 404) {
                alert('Автомобиль не найден в базе данных');
            } else {
                throw new Error(`Ошибка сервера: ${response.status}`);
            }
            return;
        }
        
        const car = await response.json();
        console.log('Полученные данные:', car);
        
        // Заполняем модальное окно данными
        document.getElementById('modalCarTitle').textContent = car.title || car.model;
        document.getElementById('modalPrice').textContent = `от ${car.price} ₽`;
        document.getElementById('modalImage').src = car.image;
        document.getElementById('modalImage').alt = car.title || car.model;
        document.getElementById('modalDescription').textContent = car.description || 'Описание отсутствует';

        // Заполняем технические характеристики
        const techSpecsList = document.getElementById('techSpecs');
        techSpecsList.innerHTML = '';
        
        if (car.techSpecs && car.techSpecs.length > 0) {
            car.techSpecs.forEach(spec => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="spec-name">${spec.name || spec}</span><span class="spec-value">${spec.value || ''}</span>`;
                techSpecsList.appendChild(li);
            });
        } else {
            techSpecsList.innerHTML = '<li>Характеристики отсутствуют</li>';
        }

        // Заполняем комплектацию
        const equipmentList = document.getElementById('equipmentSpecs');
        equipmentList.innerHTML = '';
        
        if (car.equipment && car.equipment.length > 0) {
            car.equipment.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="spec-name">${item.name || item}</span><span class="spec-value">${item.value || ''}</span>`;
                equipmentList.appendChild(li);
            });
        } else {
            equipmentList.innerHTML = '<li>Комплектация не указана</li>';
        }

        // Заполняем особенности
        const featuresGrid = document.getElementById('featuresGrid');
        featuresGrid.innerHTML = '';
        
        if (car.features && car.features.length > 0) {
            car.features.forEach(feature => {
                const div = document.createElement('div');
                div.className = 'feature-item';
                div.textContent = feature;
                featuresGrid.appendChild(div);
            });
        } else {
            featuresGrid.innerHTML = '<div class="feature-item">Особенности не указаны</div>';
        }

        // Показываем модальное окно
        modal.style.display = 'block';
        
    } catch (error) {
        console.error('Error loading car details:', error);
        alert(`Ошибка при загрузке данных автомобиля: ${error.message}`);
    }
}

// Закрываем модальное окно
closeBtn.addEventListener('click', function() {
    modal.style.display = 'none';
});

window.addEventListener('click', function(event) {
    if (event.target === modal) {
        modal.style.display = 'none';
    }
});

document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        modal.style.display = 'none';
    }
});

// Для отладки: проверим, что все модели доступны
async function checkAllModels() {
    const models = ['logan', 'sandero', 'stepway', 'duster', 'kaptur', 'arkana', 'loganvan', 'kangoo', 'trafic', 'zoe', 'megane', 'captur'];
    
    console.log('Проверка доступности моделей...');
    
    for (const model of models) {
        try {
            const response = await fetch(`http://localhost:8080/api/cars/${model}`);
            console.log(`${model}: ${response.ok ? '✅ OK' : '❌ Not found'}`);
        } catch (error) {
            console.log(`${model}: ❌ Error - ${error.message}`);
        }
    }
}
</script>
</body>
</html>